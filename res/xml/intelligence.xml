<?xml version="1.0" encoding="utf-8"?>
<intelligence>
	<luascript
		nom="Gestion du flux de sortie"
		commentaire="Crée un tableau de chaines de charatères et des fonctions associées"
		executer="true"
		lua="
			fluxus = {}
			
			function fluxus.pop()
				local str = 'Fluxus vide...'
				if #fluxus >= 1 then
					str = fluxus[1]
				end
				table.remove(fluxus, 1)
				return str
			end
			
			function fluxus.push(str)
					fluxus[#fluxus+1]=str
			end
			
			function fluxus.clear()
				while #fluxus>0 do 
					fluxus.pop()
				end
			end
			
			function fluxus.isEmpty()
				return #fluxus==0
			end
			
			fluxus.push('Fluxus initialisé')			
		"
	/>
	
	<luascript
		nom="Initialisation du namespace 'tarot'"
		commentaire="Crée une table 'tarot' qui sera utilisée par les différentes fonctions de l'IA"
		executer="true"
		lua="
			tarot={}
			tarot.main={}
			fluxus.push('Namespaces créés')
		"
	/>
	
	<luascript
		nom="Carte aléatoire"
		commentaire=""
		executer="true"
		lua="
			function tarot.rndCard()
				return math.random(0,77)
			end
		"
	/>
	
	<luascript
		nom="Fonctions sur les cartes"
		commentaire=""
		executer="true"
		lua="
			function tarot.main.pop(target)
				target = target or 1
				local card = -1
				if #tarot.main >= 1 then
					card = tarot.main[(target%#tarot.main)+1]
				end
				table.remove(tarot.main, (target%#tarot.main)+1)
				return card
			end
			
			function tarot.main.push(card)
					card = card or -1
					tarot.main[#tarot.main+1]=card
			end
			
			function tarot.main.clear()
				while #tarot.main>0 do 
					tarot.main.pop()
				end
			end
			
			function tarot.main.isEmpty()
				return #tarot.main==0
			end
			
			function tarot.main.rndGetCard()
				return tarot.main[math.random(1, #tarot.main)]
			end
			function tarot.main.rndPopCard()
				return tarot.main.pop(math.random(#tarot.main))
			end
			
			fluxus.push('Fonctions sur la main créés')
		"
	/>
	
	<luascript
		nom="Contrats"
		commentaire="WOOHOO"
		executer="true"
		lua="
			tarot.rndContrat()
				return math.random(0,4)
			end 
		"
	
	/>
	
	<luascript
		nom="Tables standard"
		commentaire="Utilisés par l'IA par défaut et utilisables par des IA customisés"
		executer="true"
		lua="
			tarot.chien={}
			tarot.joueur={}
			for i=1,4 do
				tarot.joueur[i]={}
				tarot.joueur[i].plis={}
				tarot.joueur[i].cartes={}
				tarot.joueur[i].cartes.possible={}
				tarot.joueur[i].cartes.probable={}
				for c=0,77 do
					tarot.joueur[i].cartes.possible[i]=true
					tarot.joueur[i].cartes.probable[i]=100
				end
			end
					
		"
	
	/>
	
	<luascript
		nom="Operations Callback"
		commentaire="Fonctions à redéfinir pour créer une IA"
		executer="true"
		lua="
			tarot.demander = {}
			tarot.dire = {}
			
			function tarot.demander.annonce()
				return math.random(0,4)
			end
			
			function tarot.demander.ecart()
				local ecart = {}
				for i=1,6 do
					ecart[i]=math.random(0,77)
				end
				return ecart
			end
			
			function tarot.demander.carte()
				return math.random(0,77)
			end
			
			function tarot.dire.chien(chien)
			end
			
			function tarot.dire.cartejouee(carte, joueur)
			end
			
			function tarot.dire.annonce(annonce, joueur)
			end
			
			function tarot.dire.pliRemporte(pli, joueur)
			end
			
			function tarot.dire.main(main)
			end
			
			function tarot.dire.score(score)
			end
		"
	
	/>
	
	<luascript
		nom="Script de test Lua"
		commentaire="Script sans réelle utilité, ne sert que pour vérifier que Lua est chargé."
		executer="false"
		lua="
			fluxus.push('Script de test chargé')
		"
	/>
	
</intelligence>

